{"version":3,"sources":["../static/js/3.923d1dd2.chunk.js","routes/Login/model/index.js","../delegated 560 from dll-reference vendor_65a94337dbbbdabf630f","routes/Login/service/index.js"],"names":["webpackJsonp","195","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_dva_router__","__WEBPACK_IMPORTED_MODULE_2__service__","__WEBPACK_IMPORTED_MODULE_3_cmn_utils__","__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default","namespace","state","loggedIn","message","user","subscriptions","setup","_ref","history","dispatch","listen","_ref2","pathname","indexOf","a","removeStore","userId","getQueryValue","setStore","type","payload","user_id","token","app_key","org_id","time","client_secret","effects","login","mark","_ref3","_ref4","_ref5","status","data","call","put","wrap","_context","prev","next","sent","replace","stop","this","logout","_","_ref6","_context2","reducers","loginSuccess","_ref7","assign","loginError","_ref8","199","exports","204","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","d","__WEBPACK_IMPORTED_MODULE_1_cmn_utils__","__WEBPACK_IMPORTED_MODULE_1_cmn_utils___default","_callee","params","abrupt","post","_x"],"mappings":"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","file":"static/js/3.923d1dd2.chunk.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 195:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(199);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_dva_router__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__service__ = __webpack_require__(204);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_cmn_utils__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_cmn_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_cmn_utils__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({namespace:'login',state:{loggedIn:false,message:'',user:{}},subscriptions:{setup:function setup(_ref){var history=_ref.history,dispatch=_ref.dispatch;return history.listen(function(_ref2){var pathname=_ref2.pathname;if(pathname.indexOf('/user/login')!==-1){__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.removeStore(\"user\");var userId=__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('userId');if(userId){__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.setStore('userId',userId);__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.setStore('planType',__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('plan_type'));dispatch({type:'login',payload:{'user_id':__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('userId'),'token':__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('token'),'app_key':__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('app_key'),'org_id':__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('org_id'),'time':__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('time'),'client_secret':__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('client_secret')}});}else{}}});}},effects:{login:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function login(_ref3,_ref4){var payload=_ref3.payload;var call=_ref4.call,put=_ref4.put;var _ref5,status,message,data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function login$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return call(__WEBPACK_IMPORTED_MODULE_2__service__[\"a\" /* login */],payload);case 2:_ref5=_context.sent;status=_ref5.status;message=_ref5.message;data=_ref5.data;if(!status){_context.next=14;break;}__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.setStore('user',data);_context.next=10;return put({type:'loginSuccess',payload:data});case 10:_context.next=12;return put(__WEBPACK_IMPORTED_MODULE_1_dva_router__[\"routerRedux\"].replace(__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.getQueryValue('forwardURL')));case 12:_context.next=16;break;case 14:_context.next=16;return put({type:'loginError',payload:{message:message}});case 16:case'end':return _context.stop();}}},login,this);}),logout:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function logout(_,_ref6){var put=_ref6.put;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function logout$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case'end':return _context2.stop();}}},logout,this);})},reducers:{loginSuccess:function loginSuccess(state,_ref7){var payload=_ref7.payload;return Object.assign({},state,{loggedIn:true,message:'',user:payload});},loginError:function loginError(state,_ref8){var payload=_ref8.payload;return Object.assign({},state,{loggedIn:false,message:payload.message});}}});\n\n/***/ }),\n\n/***/ 199:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = (__webpack_require__(0))(560);\n\n/***/ }),\n\n/***/ 204:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return login; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(199);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cmn_utils__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cmn_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_cmn_utils__);\nfunction _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}// 模拟\nvar login=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(params){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt('return',__WEBPACK_IMPORTED_MODULE_1_cmn_utils___default.a.post('/auth/login'));case 1:case'end':return _context.stop();}}},_callee,this);}));return function login(_x){return _ref.apply(this,arguments);};}();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.923d1dd2.chunk.js","import { routerRedux } from 'dva/router';\r\nimport { login } from '../service';\r\nimport $$ from 'cmn-utils';\r\n\r\nexport default {\r\n  namespace: 'login',\r\n\r\n  state: {\r\n    loggedIn: false,\r\n    message: '',\r\n    user: {},\r\n  },\r\n\r\n  subscriptions: {\r\n    setup({ history, dispatch }) {\r\n      return history.listen(({ pathname }) => {\r\n        if (pathname.indexOf('/user/login') !== -1) {\r\n          $$.removeStore(\"user\");\r\n          const userId = $$.getQueryValue('userId');\r\n          if (userId) {\r\n            $$.setStore('userId', userId);\r\n            $$.setStore('planType', $$.getQueryValue('plan_type'));\r\n            dispatch({\r\n              type: 'login',\r\n              payload: {\r\n              \t'user_id': $$.getQueryValue('userId'),\r\n              \t'token': $$.getQueryValue('token'),\r\n              \t'app_key': $$.getQueryValue('app_key'),\r\n              \t'org_id': $$.getQueryValue('org_id'),\r\n              \t'time': $$.getQueryValue('time'),\r\n              \t'client_secret': $$.getQueryValue('client_secret')\r\n              }\r\n            })\r\n          } else {\r\n            \r\n          }\r\n        }\r\n      });\r\n    },\r\n  },\r\n\r\n  effects: {\r\n    *login({ payload }, { call, put }) {\r\n      const {status, message, data} = yield call(login, payload)\r\n      if (status) {\r\n        $$.setStore('user', data);\r\n        yield put({\r\n          type: 'loginSuccess',\r\n          payload: data\r\n        })\r\n        yield put(routerRedux.replace($$.getQueryValue('forwardURL')));\r\n      } else {\r\n        yield put({\r\n          type: 'loginError',\r\n          payload: {message}\r\n        })\r\n      }\r\n    },\r\n    *logout(_, { put }) {\r\n\r\n    },\r\n  },\r\n\r\n  reducers: {\r\n    loginSuccess(state, { payload }) {\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n        message: '',\r\n        user: payload\r\n      };\r\n    },\r\n    loginError(state, { payload }) {\r\n      return {\r\n        ...state,\r\n        loggedIn: false,\r\n        message: payload.message\r\n      };\r\n    }\r\n  },\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/model/index.js","module.exports = (__webpack_require__(0))(560);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/babel-runtime/regenerator/index.js from dll-reference vendor_65a94337dbbbdabf630f\n// module id = 199\n// module chunks = 2 3","import $$ from 'cmn-utils';\r\n// 模拟\r\nexport async function login(params) {\r\n  return $$.post('/auth/login');\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/service/index.js"],"sourceRoot":""}