{"version":3,"sources":["../static/js/17.0657ae2d.chunk.js","routes/Login/service/index.js","routes/Login/model/index.js"],"names":["webpackJsonp","1506","module","__webpack_exports__","__webpack_require__","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","d","login","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_cmn_utils__","__WEBPACK_IMPORTED_MODULE_1_cmn_utils___default","_ref","a","mark","_callee","payload","wrap","_context","prev","next","abrupt","post","stop","_x","988","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1_dva_router__","__WEBPACK_IMPORTED_MODULE_2__service__","__WEBPACK_IMPORTED_MODULE_3_cmn_utils__","__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default","namespace","state","loggedIn","message","user","subscriptions","setup","history","dispatch","listen","_ref2","pathname","indexOf","removeStore","effects","_ref3","_ref4","_ref5","status","data","call","put","sent","setStore","replace","type","logout","_","_ref6","_context2","reducers","loginSuccess","_ref7","assign","loginError","_ref8"],"mappings":"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","file":"static/js/17.0657ae2d.chunk.js","sourcesContent":["webpackJsonp([17],{\n\n/***/ 1506:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return login; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(140);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cmn_utils__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cmn_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_cmn_utils__);\nfunction _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}var login=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(payload){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt('return',__WEBPACK_IMPORTED_MODULE_1_cmn_utils___default.a.post('/user/login',payload));case 1:case'end':return _context.stop();}}},_callee,this);}));return function login(_x){return _ref.apply(this,arguments);};}();\n\n/***/ }),\n\n/***/ 988:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(140);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_dva_router__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__service__ = __webpack_require__(1506);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_cmn_utils__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_cmn_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_cmn_utils__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({namespace:'login',state:{loggedIn:false,message:'',user:{}},subscriptions:{setup:function setup(_ref){var history=_ref.history,dispatch=_ref.dispatch;return history.listen(function(_ref2){var pathname=_ref2.pathname;if(pathname.indexOf('/sign/login')!==-1){__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.removeStore('user');}});}},effects:{login:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function login(_ref3,_ref4){var payload=_ref3.payload;var call=_ref4.call,put=_ref4.put;var _ref5,status,message,data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function login$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return call(__WEBPACK_IMPORTED_MODULE_2__service__[\"a\" /* login */],payload);case 2:_ref5=_context.sent;status=_ref5.status;message=_ref5.message;data=_ref5.data;if(!status){_context.next=12;break;}__WEBPACK_IMPORTED_MODULE_3_cmn_utils___default.a.setStore('user',data);_context.next=10;return put(__WEBPACK_IMPORTED_MODULE_1_dva_router__[\"routerRedux\"].replace('/'));case 10:_context.next=14;break;case 12:_context.next=14;return put({type:'loginError',payload:{message:message}});case 14:case'end':return _context.stop();}}},login,this);}),logout:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function logout(_,_ref6){var put=_ref6.put;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function logout$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case'end':return _context2.stop();}}},logout,this);})},reducers:{loginSuccess:function loginSuccess(state,_ref7){var payload=_ref7.payload;return Object.assign({},state,{loggedIn:true,message:'',user:payload});},loginError:function loginError(state,_ref8){var payload=_ref8.payload;return Object.assign({},state,{loggedIn:false,message:payload.message});}}});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/17.0657ae2d.chunk.js","import $$ from 'cmn-utils';\r\n\r\nexport async function login(payload) {\r\n  return $$.post('/user/login', payload);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/service/index.js","import { routerRedux } from 'dva/router';\r\nimport { login } from '../service';\r\nimport $$ from 'cmn-utils';\r\n\r\nexport default {\r\n  namespace: 'login',\r\n\r\n  state: {\r\n    loggedIn: false,\r\n    message: '',\r\n    user: {},\r\n  },\r\n\r\n  subscriptions: {\r\n    setup({ history, dispatch }) {\r\n      return history.listen(({ pathname }) => {\r\n        if (pathname.indexOf('/sign/login') !== -1) {\r\n          $$.removeStore('user');\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  effects: {\r\n    *login({ payload }, { call, put }) {\r\n      const { status, message, data } = yield call(login, payload);\r\n      if (status) {\r\n        $$.setStore('user', data);\r\n        yield put(routerRedux.replace('/'));\r\n      } else {\r\n        yield put({\r\n          type: 'loginError',\r\n          payload: { message }\r\n        });\r\n      }\r\n    },\r\n    *logout(_, { put }) {}\r\n  },\r\n\r\n  reducers: {\r\n    loginSuccess(state, { payload }) {\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n        message: '',\r\n        user: payload\r\n      };\r\n    },\r\n    loginError(state, { payload }) {\r\n      return {\r\n        ...state,\r\n        loggedIn: false,\r\n        message: payload.message\r\n      };\r\n    },\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/model/index.js"],"sourceRoot":""}